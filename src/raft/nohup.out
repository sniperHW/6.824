start  1
disconnect(0)
0 readPersist with no state
0 mainRoutine start
disconnect(1)
server: 0 becomeFollower at term 0
1 readPersist with no state
1 mainRoutine start
disconnect(2)
server: 1 becomeFollower at term 0
2 readPersist with no state
2 mainRoutine start
server: 2 becomeFollower at term 0
disconnect(3)
3 readPersist with no state
disconnect(4)
3 mainRoutine start
server: 3 becomeFollower at term 0
4 readPersist with no state
connect(0)
connect(1)
connect(2)
connect(3)
4 mainRoutine start
server: 4 becomeFollower at term 0
connect(4)
Test (2C): Figure 8 (unreliable) ...
server: 1 becomeCandidate at term 1 2019-11-03 22:06:00.514049381 +0800 CST m=+0.534310565
server: 3 becomeFollower at term 1
server: 2 becomeFollower at term 1
server: 1 becomeLeader at term 1
server: 0 becomeFollower at term 1
server: 4 becomeCandidate at term 1 2019-11-03 22:06:00.544602849 +0800 CST m=+0.564864048
server: 2 0 0 term 1 follower commit 0 [{0 0 <nil>}]
server: 0 0 0 term 1 follower commit 0 [{0 0 <nil>}]
server: 0 replicate entrys from 1 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 0 0 0 term 1 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 3 0 0 term 1 follower commit 0 [{0 0 <nil>}]
server: 4 becomeFollower at term 1
server: 3 replicate entrys from 1 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 3 0 0 term 1 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 0 0 term 1 follower commit 0 [{0 0 <nil>}]
server: 1 apply from 0 to 0
server: 1 0 1 commitIndex 1 leader commit  3 [{1 1 1187}]
server: 4 replicate entrys from 1 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 4 apply from 0 to 0
server: 4 0 1 term 1 follower commit 1 [{0 0 <nil>} {1 1 1187}]
disconnect(1)
server: 2 becomeCandidate at term 2 2019-11-03 22:06:01.080135123 +0800 CST m=+1.100396311
server: 3 becomeFollower at term 2
server: 4 becomeFollower at term 2
server: 0 becomeFollower at term 2
server: 2 becomeFollower at term 2
server: 3 becomeCandidate at term 3 2019-11-03 22:06:01.759921388 +0800 CST m=+1.780182554
server: 0 becomeFollower at term 3
server: 2 becomeFollower at term 3
server: 3 becomeLeader at term 3
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 reject3 from 3 because of consistent check &{0 0 <nil>} 1 1
server: 3 onAppendEntrysReply failed from 2 0 1
server: 0 drop entrys from 3 2 1 [{1 1 1187}] drops [{1 1 1187}] 2019-11-03 22:06:01.805502976 +0800 CST m=+1.825764129
server: 0 replicate entrys from 3 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>}]
server: 2 replicate entrys from 3 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 becomeCandidate at term 3 2019-11-03 22:06:01.854468131 +0800 CST m=+1.874729307
server: 4 becomeFollower at term 3
server: 4 1 1 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 drop entrys from 3 2 1 [{1 1 1187}] drops [{1 1 1187}] 2019-11-03 22:06:01.93319747 +0800 CST m=+1.953458684
server: 4 replicate entrys from 3 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 4 1 1 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 1 1 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 2 0 0 term 3 follower commit 0 [{0 0 <nil>} {1 1 1187}]
disconnect(3)
server: 2 becomeCandidate at term 4 2019-11-03 22:06:02.845181674 +0800 CST m=+2.865443005
server: 4 becomeFollower at term 4
server: 0 becomeFollower at term 4
server: 2 becomeLeader at term 4
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 drop entrys from 2 2 1 [{1 1 1187}] drops [{1 1 1187}] 2019-11-03 22:06:02.881088704 +0800 CST m=+2.901349870
server: 0 replicate entrys from 2 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 0 0 0 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 drop entrys from 2 2 1 [{1 1 1187}] drops [{1 1 1187}] 2019-11-03 22:06:02.992007821 +0800 CST m=+3.012268937
server: 4 replicate entrys from 2 [{0 0 <nil>} {1 1 1187}] Entries [{1 1 1187}]
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 0 0 0 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
disconnect(2)
connect(2)
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187}]
server: 4 replicate entrys from 2 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}] Entries [{2 4 8084} {3 4 2383}]
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
server: 0 replicate entrys from 2 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}] Entries [{2 4 8084} {3 4 2383}]
server: 0 0 0 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
server: 4 drop entrys from 2 4 2 [{2 4 8084} {3 4 2383}] drops [{2 4 8084} {3 4 2383}] 2019-11-03 22:06:03.33077141 +0800 CST m=+3.351032520
server: 4 replicate entrys from 2 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}] Entries [{2 4 8084} {3 4 2383}]
server: 4 1 1 term 4 follower commit 0 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
server: 2 apply from 0 to 2
server: 2 0 3 commitIndex 3 leader commit  4 [{2 4 8084} {3 4 2383}]
server: 0 apply from 0 to 2
server: 0 0 3 term 4 follower commit 3 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
server: 4 apply from 1 to 2
server: 4 1 3 term 4 follower commit 3 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
disconnect(2)
connect(1)
server: 0 becomeCandidate at term 5 2019-11-03 22:06:04.029981055 +0800 CST m=+4.050242209
server: 4 becomeFollower at term 5
server: 1 becomeFollower at term 5
server: 1 becomeCandidate at term 6 2019-11-03 22:06:04.784260806 +0800 CST m=+4.804521978
server: 4 becomeFollower at term 6
server: 0 becomeFollower at term 5
server: 1 becomeFollower at term 6
server: 4 becomeCandidate at term 7 2019-11-03 22:06:05.418908135 +0800 CST m=+5.439169402
server: 0 becomeFollower at term 7
server: 1 becomeFollower at term 7
server: 1 becomeCandidate at term 8 2019-11-03 22:06:05.931695862 +0800 CST m=+5.951956980
server: 0 becomeFollower at term 8
server: 4 becomeFollower at term 8
server: 0 becomeCandidate at term 9 2019-11-03 22:06:06.641950535 +0800 CST m=+6.662211711
server: 4 becomeFollower at term 9
server: 1 becomeFollower at term 9
server: 0 becomeLeader at term 9
server: 1 reject3 from 0 because of consistent check &{3 1 2810} 3 4
server: 0 onAppendEntrysReply failed from 1 1 3
server: 4 3 3 term 9 follower commit 3 [{0 0 <nil>} {1 1 1187} {2 4 8084} {3 4 2383}]
2019/11/03 22:06:06 apply error: commit index=2 server=1 1533 != server=4 8084
exit status 1
FAIL	raft	6.701s
1 failed
